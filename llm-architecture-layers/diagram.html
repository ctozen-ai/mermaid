<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LLM Architecture Layers</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 490 490'><path d='M490.16,84.61C490.16,37.912 452.248,0 405.55,0L84.61,0C37.912,0 0,37.912 0,84.61L0,405.55C0,452.248 37.912,490.16 84.61,490.16L405.55,490.16C452.248,490.16 490.16,452.248 490.16,405.55L490.16,84.61Z' fill='%23ff3670'/><path d='M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z' fill='white'/></svg>">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #f0f2f5; overflow: hidden; width: 100vw; height: 100vh; }
  #container { width: 100%; height: 100%; cursor: grab; }
  #container.grabbing { cursor: grabbing; }
  #controls {
    position: fixed; bottom: 16px; right: 16px; display: flex; gap: 8px; z-index: 10;
  }
  #controls button {
    background: #fff; color: #333; border: 1px solid #ccc; border-radius: 6px;
    padding: 6px 14px; font-size: 14px; cursor: pointer; box-shadow: 0 1px 3px rgba(0,0,0,0.15);
  }
  #controls button:hover { background: #e8e8e8; }
</style>
</head>
<body>
<div id="container"><svg id="my-svg" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="flowchart" style="max-width: 1915.03px; background-color: transparent;" viewBox="0 0 1915.0269775390625 4908" role="graphics-document document" aria-roledescription="flowchart-v2"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#my-svg .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#my-svg .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:1px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-thickness-invisible{stroke-width:0;fill:none;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#333333;stroke:#333333;}#my-svg .marker.cross{stroke:#333333;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg p{margin:0;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span{color:#333;}#my-svg .cluster-label span p{background-color:transparent;}#my-svg .label text,#my-svg span{fill:#333;color:#333;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#my-svg .rough-node .label text,#my-svg .node .label text,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .rough-node .label,#my-svg .node .label,#my-svg .image-shape .label,#my-svg .icon-shape .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#333333;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#333333;fill:none;}#my-svg .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#my-svg .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#my-svg .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#my-svg rect.text{fill:none;stroke-width:0;}#my-svg .icon-shape,#my-svg .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#my-svg .icon-shape p,#my-svg .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#my-svg .icon-shape rect,#my-svg .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#my-svg .label-icon{display:inline-block;height:1em;overflow:visible;vertical-align:-0.125em;}#my-svg .node .label-icon path{fill:currentColor;stroke:revert;stroke-width:revert;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker id="my-svg_flowchart-v2-pointEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-pointStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="8" markerHeight="8" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleEnd" class="marker flowchart-v2" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-circleStart" class="marker flowchart-v2" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossEnd" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-v2-crossStart" class="marker cross flowchart-v2" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster" id="reasoning" data-look="classic"><rect style="fill:#f8d7da !important;stroke:#e74c3c !important" x="8" y="2780" width="637.55859375" height="1562"/><g class="cluster-label" transform="translate(234.896484375, 2780)"><foreignObject width="183.765625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Reasoning &amp; Agentic Loop</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M141.984,3489L141.984,3495.167C141.984,3501.333,141.984,3513.667,151.865,3563.183C161.745,3612.7,181.505,3699.4,191.385,3742.75L201.265,3786.1" id="L_cot_planning_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_cot_planning_0" data-points="W3sieCI6MTQxLjk4NDM3NSwieSI6MzQ4OX0seyJ4IjoxNDEuOTg0Mzc1LCJ5IjozNTI2fSx7IngiOjIwMi4xNTQyMzg4NjEzODYxNSwieSI6Mzc5MH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M211.043,3868L211.043,3910C211.043,3952,211.043,4036,218.57,4091.419C226.096,4146.837,241.15,4173.674,248.676,4187.093L256.203,4200.511" id="L_planning_tool_use_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_planning_tool_use_0" data-points="W3sieCI6MjExLjA0Mjk2ODc1LCJ5IjozODY4fSx7IngiOjIxMS4wNDI5Njg3NSwieSI6NDEyMH0seyJ4IjoyNTguMTU5OTQ1MTAxMzUxMzUsInkiOjQyMDR9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M380.492,3489L380.492,3495.167C380.492,3501.333,380.492,3513.667,356.211,3563.251C331.93,3612.836,283.368,3699.673,259.087,3743.091L234.806,3786.509" id="L_self_reflection_planning_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_self_reflection_planning_0" data-points="W3sieCI6MzgwLjQ5MjE4NzUsInkiOjM0ODl9LHsieCI6MzgwLjQ5MjE4NzUsInkiOjM1MjZ9LHsieCI6MjMyLjg1MzI2NDIzMjY3MzI3LCJ5IjozNzkwfV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1381.305,4867.808L1468.925,4860.007C1556.546,4852.205,1731.786,4836.603,1819.407,4790.968C1907.027,4745.333,1907.027,4669.667,1907.027,4594C1907.027,4518.333,1907.027,4442.667,1907.027,4400.667C1907.027,4358.667,1907.027,4350.333,1907.027,4327.667C1907.027,4305,1907.027,4268,1907.027,4231C1907.027,4194,1907.027,4157,1907.027,4090C1907.027,4023,1907.027,3926,1907.027,3827C1907.027,3728,1907.027,3627,1907.027,3563.833C1907.027,3500.667,1907.027,3475.333,1907.027,3450C1907.027,3424.667,1907.027,3399.333,1907.027,3336.167C1907.027,3273,1907.027,3172,1907.027,3073C1907.027,2974,1907.027,2877,1907.027,2824.333C1907.027,2771.667,1907.027,2763.333,1907.027,2710.667C1907.027,2658,1907.027,2561,1907.027,2462C1907.027,2363,1907.027,2262,1907.027,2171.667C1907.027,2081.333,1907.027,2001.667,1907.027,1924C1907.027,1846.333,1907.027,1770.667,1907.027,1703.667C1907.027,1636.667,1907.027,1578.333,1907.027,1520C1907.027,1461.667,1907.027,1403.333,1907.027,1334.333C1907.027,1265.333,1907.027,1185.667,1907.027,1106C1907.027,1026.333,1907.027,946.667,1833.212,882.436C1759.397,818.206,1611.768,769.411,1537.953,745.014L1464.138,720.617" id="L_user_interface_layer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_user_interface_layer_0" data-points="W3sieCI6MTM4MS4zMDQ2ODc1LCJ5Ijo0ODY3LjgwODEwMzY0MzE2MX0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5Ijo0ODIxfSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjQ1OTR9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6NDM2N30seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5Ijo0MzQyfSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjQyMzF9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6NDEyMH0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5IjozODI5fSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjM1MjZ9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6MzQ1MH0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5IjozMzc0fSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjMwNzF9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6Mjc4MH0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5IjoyNzU1fSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjI0NjR9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6MjE2MX0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5IjoxOTIyfSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjE2OTV9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6MTUyMH0seyJ4IjoxOTA3LjAyNzM0Mzc1LCJ5IjoxMzQ1fSx7IngiOjE5MDcuMDI3MzQzNzUsInkiOjExMDZ9LHsieCI6MTkwNy4wMjczNDM3NSwieSI6ODY3fSx7IngiOjE0NjAuMzM5ODQzNzUsInkiOjcxOS4zNjE3NTg0MjA2Nzc3fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1125.34,706.68L1020.475,733.4C915.611,760.12,705.882,813.56,601.017,843.78C496.152,874,496.152,881,496.152,884.5L496.152,888" id="L_interface_layer_safety_input_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_interface_layer_safety_input_0" data-points="W3sieCI6MTEyNS4zMzk4NDM3NSwieSI6NzA2LjY3OTg0NjIzODMzMDZ9LHsieCI6NDk2LjE1MjM0Mzc1LCJ5Ijo4Njd9LHsieCI6NDk2LjE1MjM0Mzc1LCJ5Ijo4OTJ9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M496.152,1320L496.152,1324.167C496.152,1328.333,496.152,1336.667,498.541,1344.444C500.929,1352.221,505.706,1359.443,508.094,1363.053L510.482,1366.664" id="L_safety_input_orchestration_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_safety_input_orchestration_0" data-points="W3sieCI6NDk2LjE1MjM0Mzc1LCJ5IjoxMzIwfSx7IngiOjQ5Ni4xNTIzNDM3NSwieSI6MTM0NX0seyJ4Ijo1MTIuNjg5MTc0MTA3MTQyOSwieSI6MTM3MH1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M611.91,1670L611.91,1674.167C611.91,1678.333,611.91,1686.667,611.91,1694.333C611.91,1702,611.91,1709,611.91,1712.5L611.91,1716" id="L_orchestration_caching_layer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_orchestration_caching_layer_0" data-points="W3sieCI6NjExLjkxMDE1NjI1LCJ5IjoxNjcwfSx7IngiOjYxMS45MTAxNTYyNSwieSI6MTY5NX0seyJ4Ijo2MTEuOTEwMTU2MjUsInkiOjE3MjB9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M504.532,2124L501.254,2130.167C497.976,2136.333,491.419,2148.667,488.141,2160.333C484.863,2172,484.863,2183,484.863,2188.5L484.863,2194" id="L_caching_layer_context_layer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_caching_layer_context_layer_0" data-points="W3sieCI6NTA0LjUzMTYyNTkxNTI3MTk1LCJ5IjoyMTI0fSx7IngiOjQ4NC44NjMyODEyNSwieSI6MjE2MX0seyJ4Ijo0ODQuODYzMjgxMjUsInkiOjIxOTh9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M685.224,2124L687.462,2130.167C689.7,2136.333,694.176,2148.667,696.414,2205.333C698.652,2262,698.652,2363,698.652,2462C698.652,2561,698.652,2658,698.652,2710.667C698.652,2763.333,698.652,2771.667,698.652,2824.333C698.652,2877,698.652,2974,698.652,3073C698.652,3172,698.652,3273,698.652,3336.167C698.652,3399.333,698.652,3424.667,698.652,3450C698.652,3475.333,698.652,3500.667,698.652,3563.833C698.652,3627,698.652,3728,698.652,3827C698.652,3926,698.652,4023,698.652,4090C698.652,4157,698.652,4194,698.652,4231C698.652,4268,698.652,4305,698.652,4327.667C698.652,4350.333,698.652,4358.667,726.225,4382.256C753.798,4405.846,808.944,4444.693,836.516,4464.116L864.089,4483.539" id="L_caching_layer_safety_output_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_caching_layer_safety_output_0" data-points="W3sieCI6Njg1LjIyMzYzNjg5ODUzNTYsInkiOjIxMjR9LHsieCI6Njk4LjY1MjM0Mzc1LCJ5IjoyMTYxfSx7IngiOjY5OC42NTIzNDM3NSwieSI6MjQ2NH0seyJ4Ijo2OTguNjUyMzQzNzUsInkiOjI3NTV9LHsieCI6Njk4LjY1MjM0Mzc1LCJ5IjoyNzgwfSx7IngiOjY5OC42NTIzNDM3NSwieSI6MzA3MX0seyJ4Ijo2OTguNjUyMzQzNzUsInkiOjMzNzR9LHsieCI6Njk4LjY1MjM0Mzc1LCJ5IjozNDUwfSx7IngiOjY5OC42NTIzNDM3NSwieSI6MzUyNn0seyJ4Ijo2OTguNjUyMzQzNzUsInkiOjM4Mjl9LHsieCI6Njk4LjY1MjM0Mzc1LCJ5Ijo0MTIwfSx7IngiOjY5OC42NTIzNDM3NSwieSI6NDIzMX0seyJ4Ijo2OTguNjUyMzQzNzUsInkiOjQzNDJ9LHsieCI6Njk4LjY1MjM0Mzc1LCJ5Ijo0MzY3fSx7IngiOjg2Ny4zNTkzNzUsInkiOjQ0ODUuODQyMzkwNDQ3OTA2fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M484.863,2730L484.863,2734.167C484.863,2738.333,484.863,2746.667,484.863,2754.333C484.863,2762,484.863,2769,484.863,2772.5L484.863,2776" id="L_context_layer_reasoning_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_context_layer_reasoning_0" data-points="W3sieCI6NDg0Ljg2MzI4MTI1LCJ5IjoyNzMwfSx7IngiOjQ4NC44NjMyODEyNSwieSI6Mjc1NX0seyJ4Ijo0ODQuODYzMjgxMjUsInkiOjI3ODB9LHsieCI6NDg0Ljg2MzI4MTI1LCJ5IjoyODA1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M329.667,4204L358.892,4190C388.116,4176,446.566,4148,475.791,4085.5C505.016,4023,505.016,3926,505.016,3827C505.016,3728,505.016,3627,505.016,3563.833C505.016,3500.667,505.016,3475.333,505.016,3450C505.016,3424.667,505.016,3399.333,504.65,3381.165C504.284,3362.997,503.552,3351.994,503.186,3346.493L502.82,3340.991" id="L_tool_use_tools_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_tool_use_tools_0" data-points="W3sieCI6MzI5LjY2NjgwNzQzMjQzMjQ1LCJ5Ijo0MjA0fSx7IngiOjUwNS4wMTU2MjUsInkiOjQxMjB9LHsieCI6NTA1LjAxNTYyNSwieSI6MzgyOX0seyJ4Ijo1MDUuMDE1NjI1LCJ5IjozNTI2fSx7IngiOjUwNS4wMTU2MjUsInkiOjM0NTB9LHsieCI6NTA1LjAxNTYyNSwieSI6MzM3NH0seyJ4Ijo1MDIuNTU0Nzc3NzQzMzk5MywieSI6MzMzN31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M393.237,3337L391.113,3343.167C388.989,3349.333,384.741,3361.667,382.616,3373.333C380.492,3385,380.492,3396,380.492,3401.5L380.492,3407" id="L_tools_self_reflection_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_tools_self_reflection_0" data-points="W3sieCI6MzkzLjIzNzE3MjU0NTM3OTUsInkiOjMzMzd9LHsieCI6MzgwLjQ5MjE4NzUsInkiOjMzNzR9LHsieCI6MzgwLjQ5MjE4NzUsInkiOjM0MTF9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M470.016,3488.941L484.215,3495.118C498.414,3501.294,526.813,3513.647,605.512,3556.314C684.212,3598.98,813.213,3671.961,877.713,3708.451L942.214,3744.941" id="L_self_reflection_alignment_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_self_reflection_alignment_0" data-points="W3sieCI6NDcwLjAxNTYyNSwieSI6MzQ4OC45NDEzMzQyODcyNDd9LHsieCI6NTU1LjIxMDkzNzUsInkiOjM1MjZ9LHsieCI6OTQ1LjY5NTMxMjUsInkiOjM3NDYuOTEwODg5MDY3MTcyM31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M645.559,3713.357L941.709,3738.089" id="L_reasoning_alignment_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_reasoning_alignment_0" data-points="W3sieCI6NTkwLjY4NjQ4MTUzODc3ODksInkiOjMzMzd9LHsieCI6NjA1LjQwNjI1LCJ5IjozMzc0fSx7IngiOjYwNS40MDYyNSwieSI6MzQ1MH0seyJ4Ijo2MDUuNDA2MjUsInkiOjM1MjZ9LHsieCI6OTQ1LjY5NTMxMjUsInkiOjM3MzguNDIxODczNDkxMDY3M31d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1090.797,4095L1090.797,4099.167C1090.797,4103.333,1090.797,4111.667,1098.166,4119.691C1105.535,4127.715,1120.273,4135.43,1127.642,4139.287L1135.01,4143.145" id="L_alignment_model_core_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_alignment_model_core_0" data-points="W3sieCI6MTA5MC43OTY4NzUsInkiOjQwOTV9LHsieCI6MTA5MC43OTY4NzUsInkiOjQxMjB9LHsieCI6MTEzOC41NTQzMDAzOTQxNDQsInkiOjQxNDV9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1302.84,4317L1302.84,4321.167C1302.84,4325.333,1302.84,4333.667,1302.84,4342C1302.84,4350.333,1302.84,4358.667,1281.959,4379.645C1261.078,4400.624,1219.315,4434.248,1198.434,4451.06L1177.553,4467.872" id="L_model_core_safety_output_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_model_core_safety_output_0" data-points="W3sieCI6MTMwMi44Mzk4NDM3NSwieSI6NDMxN30seyJ4IjoxMzAyLjgzOTg0Mzc1LCJ5Ijo0MzQyfSx7IngiOjEzMDIuODM5ODQzNzUsInkiOjQzNjd9LHsieCI6MTE3NC40Mzc1LCJ5Ijo0NDcwLjM4MDgxMzgzMjY2MX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1020.898,4796L1020.898,4800.167C1020.898,4804.333,1020.898,4812.667,1060.872,4823.714C1100.845,4834.761,1180.791,4848.523,1220.764,4855.403L1260.738,4862.284" id="L_safety_output_user_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_safety_output_user_0" data-points="W3sieCI6MTAyMC44OTg0Mzc1LCJ5Ijo0Nzk2fSx7IngiOjEwMjAuODk4NDM3NSwieSI6NDgyMX0seyJ4IjoxMjY0LjY3OTY4NzUsInkiOjQ4NjIuOTYyNTUzMDE1NDEzNX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1308.258,412L1305.688,418.167C1303.119,424.333,1297.979,436.667,1295.41,448.333C1292.84,460,1292.84,471,1292.84,476.5L1292.84,482" id="L_observability_interface_layer_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_observability_interface_layer_0" data-points="W3sieCI6MTMwOC4yNTgxMjMwMzg3MDMsInkiOjQxMn0seyJ4IjoxMjkyLjgzOTg0Mzc1LCJ5Ijo0NDl9LHsieCI6MTI5Mi44Mzk4NDM3NSwieSI6NDg2fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1248.512,323.863L1222.15,344.719C1195.788,365.575,1143.064,407.288,1116.702,463.977C1090.34,520.667,1090.34,592.333,1090.34,662C1090.34,731.667,1090.34,799.333,1090.34,873C1090.34,946.667,1090.34,1026.333,1090.34,1106C1090.34,1185.667,1090.34,1265.333,1035.765,1325.129C981.191,1384.924,872.042,1424.849,817.468,1444.811L762.893,1464.773" id="L_observability_orchestration_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_observability_orchestration_0" data-points="W3sieCI6MTI0OC41MTE3MTg3NSwieSI6MzIzLjg2MzA5MDkyNzg5OTA3fSx7IngiOjEwOTAuMzM5ODQzNzUsInkiOjQ0OX0seyJ4IjoxMDkwLjMzOTg0Mzc1LCJ5Ijo2NjR9LHsieCI6MTA5MC4zMzk4NDM3NSwieSI6ODY3fSx7IngiOjEwOTAuMzM5ODQzNzUsInkiOjExMDZ9LHsieCI6MTA5MC4zMzk4NDM3NSwieSI6MTM0NX0seyJ4Ijo3NTkuMTM2NzE4NzUsInkiOjE0NjYuMTQ3NDcxMzgyNjE1NX1d" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M1536.355,379.863L1546.118,391.386C1555.882,402.909,1575.408,425.954,1585.171,473.311C1594.934,520.667,1594.934,592.333,1594.934,662C1594.934,731.667,1594.934,799.333,1594.934,873C1594.934,946.667,1594.934,1026.333,1594.934,1106C1594.934,1185.667,1594.934,1265.333,1594.934,1334.333C1594.934,1403.333,1594.934,1461.667,1594.934,1520C1594.934,1578.333,1594.934,1636.667,1594.934,1703.667C1594.934,1770.667,1594.934,1846.333,1594.934,1924C1594.934,2001.667,1594.934,2081.333,1594.934,2171.667C1594.934,2262,1594.934,2363,1594.934,2462C1594.934,2561,1594.934,2658,1594.934,2710.667C1594.934,2763.333,1594.934,2771.667,1594.934,2824.333C1594.934,2877,1594.934,2974,1594.934,3073C1594.934,3172,1594.934,3273,1594.934,3336.167C1594.934,3399.333,1594.934,3424.667,1594.934,3450C1594.934,3475.333,1594.934,3500.667,1594.934,3563.833C1594.934,3627,1594.934,3728,1594.934,3827C1594.934,3926,1594.934,4023,1584.592,4075.43C1574.251,4127.86,1553.568,4135.719,1543.227,4139.649L1532.886,4143.579" id="L_observability_model_core_0" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_observability_model_core_0" data-points="W3sieCI6MTUzNi4zNTU0Njg3NSwieSI6Mzc5Ljg2MzM0ODc2NTQzMjF9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6NDQ5fSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjY2NH0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5Ijo4Njd9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6MTEwNn0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5IjoxMzQ1fSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjE1MjB9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6MTY5NX0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5IjoxOTIyfSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjIxNjF9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6MjQ2NH0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5IjoyNzU1fSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjI3ODB9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6MzA3MX0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5IjozMzc0fSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjM0NTB9LHsieCI6MTU5NC45MzM1OTM3NSwieSI6MzUyNn0seyJ4IjoxNTk0LjkzMzU5Mzc1LCJ5IjozODI5fSx7IngiOjE1OTQuOTMzNTkzNzUsInkiOjQxMjB9LHsieCI6MTUyOS4xNDY3MTMxMTkzNjk1LCJ5Ijo0MTQ1fV0=" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_cot_planning_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_planning_tool_use_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(380.4921875, 3526)"><g class="label" data-id="L_self_reflection_planning_0" transform="translate(-51.0625, -12)"><foreignObject width="102.125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>needs revision</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_user_interface_layer_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_interface_layer_safety_input_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_safety_input_orchestration_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_orchestration_caching_layer_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(484.86328125, 2161)"><g class="label" data-id="L_caching_layer_context_layer_0" transform="translate(-38.671875, -12)"><foreignObject width="77.34375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>cache miss</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(698.65234375, 3450)"><g class="label" data-id="L_caching_layer_safety_output_0" transform="translate(-33.09375, -12)"><foreignObject width="66.1875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>cache hit</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_context_layer_reasoning_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_tool_use_tools_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(380.4921875, 3374)"><g class="label" data-id="L_tools_self_reflection_0" transform="translate(-23.8515625, -12)"><foreignObject width="47.703125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>results</p></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(710.0217, 3613.58195)"><g class="label" data-id="L_self_reflection_alignment_0" transform="translate(-30.1953125, -12)"><foreignObject width="60.390625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>satisfied</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_reasoning_alignment_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_alignment_model_core_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_model_core_safety_output_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_safety_output_user_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" transform="translate(1292.83984375, 449)"><g class="label" data-id="L_observability_interface_layer_0" transform="translate(-66.359375, -12)"><foreignObject width="132.71875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>monitors all layers</p></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_observability_orchestration_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_observability_model_core_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="root" transform="translate(1240.51171875, 0)"><g class="clusters"><g class="cluster" id="observability" data-look="classic"><rect style="fill:#dce6f0 !important;stroke:#5d6d7e !important" x="8" y="8" width="287.84375" height="404"/><g class="cluster-label" transform="translate(82.6640625, 8)"><foreignObject width="138.515625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Observability Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-logging-35" transform="translate(151.921875, 82)"><rect class="basic label-container" style="" x="-87.75" y="-39" width="175.5" height="78"/><g class="label" style="" transform="translate(-57.75, -24)"><rect/><foreignObject width="115.5" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Request Logging<br />&amp; Audit Trail</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-metrics-36" transform="translate(151.921875, 210)"><rect class="basic label-container" style="" x="-106.421875" y="-39" width="212.84375" height="78"/><g class="label" style="" transform="translate(-76.421875, -24)"><rect/><foreignObject width="152.84375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Latency, Token Usage<br />&amp; Cost Metrics</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-evals-37" transform="translate(151.921875, 338)"><rect class="basic label-container" style="" x="-103.6640625" y="-39" width="207.328125" height="78"/><g class="label" style="" transform="translate(-73.6640625, -24)"><rect/><foreignObject width="147.328125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Evaluation &amp; Quality<br />Monitoring</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(859.359375, 4384)"><g class="clusters"><g class="cluster" id="safety_output" data-look="classic"><rect style="fill:#e2d1f0 !important;stroke:#9b59b6 !important" x="8" y="8" width="307.078125" height="404"/><g class="cluster-label" transform="translate(89.625, 8)"><foreignObject width="143.828125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Output Safety Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-output_filter-32" transform="translate(161.5390625, 82)"><rect class="basic label-container" style="" x="-116.0390625" y="-39" width="232.078125" height="78"/><g class="label" style="" transform="translate(-86.0390625, -24)"><rect/><foreignObject width="172.078125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Output Content Filter<br />(refusal, toxicity check)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-watermark-33" transform="translate(161.5390625, 210)"><rect class="basic label-container" style="" x="-100.7421875" y="-39" width="201.484375" height="78"/><g class="label" style="" transform="translate(-70.7421875, -24)"><rect/><foreignObject width="141.484375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>AI Watermarking /<br />Detection Metadata</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-format-34" transform="translate(161.5390625, 338)"><rect class="basic label-container" style="" x="-104.5234375" y="-39" width="209.046875" height="78"/><g class="label" style="" transform="translate(-74.5234375, -24)"><rect/><foreignObject width="149.046875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Response Formatting<br />&amp; Structured Output</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(725.65234375, 4137)"><g class="clusters"><g class="cluster" id="model_core" data-look="classic"><rect style="fill:#d5d8dc !important;stroke:#5d6d7e !important" x="8" y="8" width="1138.375" height="172"/><g class="cluster-label" transform="translate(537.078125, 8)"><foreignObject width="80.21875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Model Core</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path d="M219.266,94L225.516,94C231.766,94,244.266,94,256.099,94C267.932,94,279.099,94,284.682,94L290.266,94" id="L_tokenizer_transformer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_tokenizer_transformer_0" data-points="W3sieCI6MjE5LjI2NTYyNSwieSI6OTR9LHsieCI6MjU2Ljc2NTYyNSwieSI6OTR9LHsieCI6Mjk0LjI2NTYyNSwieSI6OTR9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M525.109,94L531.359,94C537.609,94,550.109,94,561.943,94C573.776,94,584.943,94,590.526,94L596.109,94" id="L_transformer_sampling_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_transformer_sampling_0" data-points="W3sieCI6NTI1LjEwOTM3NSwieSI6OTR9LHsieCI6NTYyLjYwOTM3NSwieSI6OTR9LHsieCI6NjAwLjEwOTM3NSwieSI6OTR9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/><path d="M860.109,94L866.359,94C872.609,94,885.109,94,896.943,94C908.776,94,919.943,94,925.526,94L931.109,94" id="L_sampling_detokenizer_0" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" style=";" data-edge="true" data-et="edge" data-id="L_sampling_detokenizer_0" data-points="W3sieCI6ODYwLjEwOTM3NSwieSI6OTR9LHsieCI6ODk3LjYwOTM3NSwieSI6OTR9LHsieCI6OTM1LjEwOTM3NSwieSI6OTR9XQ==" marker-end="url(#my-svg_flowchart-v2-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel"><g class="label" data-id="L_tokenizer_transformer_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_transformer_sampling_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g class="label" data-id="L_sampling_detokenizer_0" transform="translate(0, 0)"><foreignObject width="0" height="0"><div xmlns="http://www.w3.org/1999/xhtml" class="labelBkg" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node default" id="flowchart-tokenizer-28" transform="translate(132.3828125, 94)"><rect class="basic label-container" style="" x="-86.8828125" y="-39" width="173.765625" height="78"/><g class="label" style="" transform="translate(-56.8828125, -24)"><rect/><foreignObject width="113.765625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Tokenizer<br />(text â†’ tokens)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-transformer-29" transform="translate(409.6875, 94)"><rect class="basic label-container" style="fill:#e06666 !important;stroke:#c0392b !important" x="-115.421875" y="-39" width="230.84375" height="78"/><g class="label" style="color:#fff !important" transform="translate(-85.421875, -24)"><rect/><foreignObject width="170.84375" height="48"><div style="color: rgb(255, 255, 255) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#fff !important" class="nodeLabel"><p>ðŸ§  Transformer<br />(attention + FFN layers)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-sampling-30" transform="translate(730.109375, 94)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Sampling Strategy<br />(temperature, top-p, top-k)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-detokenizer-31" transform="translate(1021.9921875, 94)"><rect class="basic label-container" style="" x="-86.8828125" y="-39" width="173.765625" height="78"/><g class="label" style="" transform="translate(-56.8828125, -24)"><rect/><foreignObject width="113.765625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Detokenizer<br />(tokens â†’ text)</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(937.6953125, 3555)"><g class="clusters"><g class="cluster" id="alignment" data-look="classic"><rect style="fill:#fff3cd !important;stroke:#f39c12 !important" x="8" y="8" width="290.203125" height="532"/><g class="cluster-label" transform="translate(94.7265625, 8)"><foreignObject width="116.75" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Alignment Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-rlhf-24" transform="translate(153.1015625, 82)"><rect class="basic label-container" style="" x="-85.59375" y="-39" width="171.1875" height="78"/><g class="label" style="" transform="translate(-55.59375, -24)"><rect/><foreignObject width="111.1875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>RLHF / RLAIF<br />(reward model)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-constitutional-25" transform="translate(153.1015625, 210)"><rect class="basic label-container" style="" x="-89.28125" y="-39" width="178.5625" height="78"/><g class="label" style="" transform="translate(-59.28125, -24)"><rect/><foreignObject width="118.5625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Constitutional AI<br />(self-critique)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-safety_training-26" transform="translate(153.1015625, 338)"><rect class="basic label-container" style="" x="-107.6015625" y="-39" width="215.203125" height="78"/><g class="label" style="" transform="translate(-77.6015625, -24)"><rect/><foreignObject width="155.203125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Safety Training<br />(harmlessness tuning)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-instruction_tuning-27" transform="translate(153.1015625, 466)"><rect class="basic label-container" style="" x="-93.8515625" y="-39" width="187.703125" height="78"/><g class="label" style="" transform="translate(-63.8515625, -24)"><rect/><foreignObject width="127.703125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Instruction Tuning<br />(helpfulness)</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(351.16796875, 2797)"><g class="clusters"><g class="cluster" id="tools" data-look="classic"><rect style="fill:#f5c6cb !important;stroke:#c0392b !important" x="8" y="8" width="251.390625" height="532"/><g class="cluster-label" transform="translate(81.171875, 8)"><foreignObject width="105.046875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Available Tools</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-code_exec-20" transform="translate(133.6953125, 82)"><rect class="basic label-container" style="" x="-85.4140625" y="-39" width="170.828125" height="78"/><g class="label" style="" transform="translate(-55.4140625, -24)"><rect/><foreignObject width="110.828125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Code Execution<br />(sandbox)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-web_search-21" transform="translate(133.6953125, 210)"><rect class="basic label-container" style="" x="-78.140625" y="-39" width="156.28125" height="78"/><g class="label" style="" transform="translate(-48.140625, -24)"><rect/><foreignObject width="96.28125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Web Search /<br />Browsing</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-function_call-22" transform="translate(133.6953125, 338)"><rect class="basic label-container" style="" x="-87.8046875" y="-39" width="175.609375" height="78"/><g class="label" style="" transform="translate(-57.8046875, -24)"><rect/><foreignObject width="115.609375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Function Calling<br />(external APIs)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-file_ops-23" transform="translate(133.6953125, 466)"><rect class="basic label-container" style="" x="-88.1953125" y="-39" width="176.390625" height="78"/><g class="label" style="" transform="translate(-58.1953125, -24)"><rect/><foreignObject width="116.390625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>File I/O /<br />Database Access</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(315.76171875, 2190)"><g class="clusters"><g class="cluster" id="context_layer" data-look="classic"><rect style="fill:#fce4cc !important;stroke:#e67e22 !important" x="8" y="8" width="322.203125" height="532"/><g class="cluster-label" transform="translate(71.0625, 8)"><foreignObject width="196.078125" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Context Management Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-system_prompt-12" transform="translate(169.1015625, 82)"><rect class="basic label-container" style="" x="-106.1875" y="-39" width="212.375" height="78"/><g class="label" style="" transform="translate(-76.1875, -24)"><rect/><foreignObject width="152.375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>System Prompt /<br />Instructions Injection</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-context_window-13" transform="translate(169.1015625, 210)"><rect class="basic label-container" style="" x="-123.6015625" y="-39" width="247.203125" height="78"/><g class="label" style="" transform="translate(-93.6015625, -24)"><rect/><foreignObject width="187.203125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Context Window<br />Management &amp; Truncation</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-rag-14" transform="translate(169.1015625, 338)"><rect class="basic label-container" style="" x="-112.8203125" y="-39" width="225.640625" height="78"/><g class="label" style="" transform="translate(-82.8203125, -24)"><rect/><foreignObject width="165.640625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>RAG â€” Retrieval<br />Augmented Generation</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-memory-15" transform="translate(169.1015625, 466)"><rect class="basic label-container" style="" x="-106.8359375" y="-39" width="213.671875" height="78"/><g class="label" style="" transform="translate(-76.8359375, -24)"><rect/><foreignObject width="153.671875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Conversation Memory<br />(short &amp; long-term)</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(438.37109375, 1712)"><g class="clusters"><g class="cluster" id="caching_layer" data-look="classic"><rect style="fill:#d4edda !important;stroke:#27ae60 !important" x="8" y="8" width="331.078125" height="404"/><g class="cluster-label" transform="translate(123.46875, 8)"><foreignObject width="100.140625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Caching Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-prompt_cache-9" transform="translate(173.5390625, 82)"><rect class="basic label-container" style="" x="-123.0390625" y="-39" width="246.078125" height="78"/><g class="label" style="" transform="translate(-93.0390625, -24)"><rect/><foreignObject width="186.078125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Prompt Cache<br />(exact &amp; semantic match)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-kv_cache-10" transform="translate(173.5390625, 210)"><rect class="basic label-container" style="" x="-128.0390625" y="-39" width="256.078125" height="78"/><g class="label" style="" transform="translate(-98.0390625, -24)"><rect/><foreignObject width="196.078125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>KV Cache<br />(attention key-value reuse)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-response_cache-11" transform="translate(173.5390625, 338)"><rect class="basic label-container" style="" x="-113.0546875" y="-39" width="226.109375" height="78"/><g class="label" style="" transform="translate(-83.0546875, -24)"><rect/><foreignObject width="166.109375" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Response Cache<br />(deterministic outputs)</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(456.68359375, 1362)"><g class="clusters"><g class="cluster" id="orchestration" data-look="classic"><rect style="fill:#cce5ff !important;stroke:#3498db !important" x="8" y="8" width="294.453125" height="300"/><g class="cluster-label" transform="translate(84.109375, 8)"><foreignObject width="142.234375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Orchestration Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-model_router-7" transform="translate(155.2265625, 94)"><rect class="basic label-container" style="" x="-109.7265625" y="-51" width="219.453125" height="102"/><g class="label" style="" transform="translate(-79.7265625, -36)"><rect/><foreignObject width="159.453125" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Model Router<br />(select model by task,<br />cost, latency)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-load_balancer-8" transform="translate(155.2265625, 234)"><rect class="basic label-container" style="" x="-89.0234375" y="-39" width="178.046875" height="78"/><g class="label" style="" transform="translate(-59.0234375, -24)"><rect/><foreignObject width="118.046875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Load Balancer /<br />Fallback Routing</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(320.65234375, 884)"><g class="clusters"><g class="cluster" id="safety_input" data-look="classic"><rect style="fill:#e2d1f0 !important;stroke:#9b59b6 !important" x="8" y="8" width="335" height="428"/><g class="cluster-label" transform="translate(109.921875, 8)"><foreignObject width="131.15625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Input Safety Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-auth-4" transform="translate(175.5, 82)"><rect class="basic label-container" style="" x="-91.1640625" y="-39" width="182.328125" height="78"/><g class="label" style="" transform="translate(-61.1640625, -24)"><rect/><foreignObject width="122.328125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Authentication &amp;<br />Rate Limiting</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-input_moderation-5" transform="translate(175.5, 222)"><rect class="basic label-container" style="" x="-130" y="-51" width="260" height="102"/><g class="label" style="" transform="translate(-100, -36)"><rect/><foreignObject width="200" height="72"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>Content Moderation<br />(PII detection, toxicity filters)</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-prompt_injection-6" transform="translate(175.5, 362)"><rect class="basic label-container" style="" x="-90.140625" y="-39" width="180.28125" height="78"/><g class="label" style="" transform="translate(-60.140625, -24)"><rect/><foreignObject width="120.28125" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Prompt Injection<br />Detection</p></span></div></foreignObject></g></g></g></g><g class="root" transform="translate(1117.33984375, 478)"><g class="clusters"><g class="cluster" id="interface_layer" data-look="classic"><rect style="fill:#d6e4f0 !important;stroke:#4a86c8 !important" x="8" y="8" width="335" height="356"/><g class="cluster-label" transform="translate(120.6875, 8)"><foreignObject width="109.625" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel" style="color:#1a1a2e !important"><p>Interface Layer</p></span></div></foreignObject></g></g></g><g class="edgePaths"/><g class="edgeLabels"/><g class="nodes"><g class="node default" id="flowchart-chat_ui-1" transform="translate(175.5, 70)"><rect class="basic label-container" style="" x="-96.2421875" y="-27" width="192.484375" height="54"/><g class="label" style="" transform="translate(-66.2421875, -12)"><rect/><foreignObject width="132.484375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Chat UI / Web App</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-api_gateway-2" transform="translate(175.5, 186)"><rect class="basic label-container" style="" x="-130" y="-39" width="260" height="78"/><g class="label" style="" transform="translate(-100, -24)"><rect/><foreignObject width="200" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;"><span class="nodeLabel"><p>API Gateway / REST Endpoint</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-cli-3" transform="translate(175.5, 302)"><rect class="basic label-container" style="" x="-63.4375" y="-27" width="126.875" height="54"/><g class="label" style="" transform="translate(-33.4375, -12)"><rect/><foreignObject width="66.875" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>CLI / SDK</p></span></div></foreignObject></g></g></g></g><g class="node default" id="flowchart-user-0" transform="translate(1322.9921875, 4873)"><rect class="basic label-container" style="fill:#5b9bd5 !important;stroke:#2c5f8a !important" x="-58.3125" y="-27" width="116.625" height="54"/><g class="label" style="color:#fff !important" transform="translate(-28.3125, -12)"><rect/><foreignObject width="56.625" height="24"><div style="color: rgb(255, 255, 255) !important; display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span style="color:#fff !important" class="nodeLabel"><p>ðŸ‘¤ User</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-cot-16" transform="translate(141.984375, 3450)"><rect class="basic label-container" style="" x="-98.984375" y="-39" width="197.96875" height="78"/><g class="label" style="" transform="translate(-68.984375, -24)"><rect/><foreignObject width="137.96875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Chain-of-Thought /<br />Extended Thinking</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-planning-17" transform="translate(211.04296875, 3829)"><rect class="basic label-container" style="" x="-86.03125" y="-39" width="172.0625" height="78"/><g class="label" style="" transform="translate(-56.03125, -24)"><rect/><foreignObject width="112.0625" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Task Planning &amp;<br />Decomposition</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-self_reflection-18" transform="translate(380.4921875, 3450)"><rect class="basic label-container" style="" x="-89.5234375" y="-39" width="179.046875" height="78"/><g class="label" style="" transform="translate(-59.5234375, -24)"><rect/><foreignObject width="119.046875" height="48"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Self-Reflection /<br />Verification</p></span></div></foreignObject></g></g><g class="node default" id="flowchart-tool_use-19" transform="translate(273.3046875, 4231)"><rect class="basic label-container" style="" x="-79.296875" y="-27" width="158.59375" height="54"/><g class="label" style="" transform="translate(-49.296875, -12)"><rect/><foreignObject width="98.59375" height="24"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Tool Use Loop</p></span></div></foreignObject></g></g></g></g></g></svg></div>
<div id="controls">
  <button onclick="zoomBy(1.3)">+</button>
  <button onclick="zoomBy(0.7)">&minus;</button>
  <button onclick="resetView()">Reset</button>
</div>
<script>
  const container = document.getElementById('container');
  let scale = 1, tx = 0, ty = 0, dragging = false, startX, startY;
  {
    const el = container.querySelector('svg');
    el.style.transformOrigin = '0 0';
    el.removeAttribute('width');
    el.removeAttribute('height');
    el.style.width = 'max-content';
    el.style.height = 'max-content';
    applyTransform();
  }
  function applyTransform() {
    const el = container.querySelector('svg');
    if (el) el.style.transform = `translate(${tx}px,${ty}px) scale(${scale})`;
  }
  function zoomAt(factor, cx, cy) {
    const prev = scale;
    scale = Math.min(Math.max(scale * factor, 0.1), 10);
    const ratio = scale / prev;
    tx = cx - ratio * (cx - tx);
    ty = cy - ratio * (cy - ty);
    applyTransform();
  }
  function zoomBy(factor) {
    zoomAt(factor, window.innerWidth / 2, window.innerHeight / 2);
  }
  function resetView() {
    scale = 1; tx = 0; ty = 0; applyTransform();
  }
  container.addEventListener('wheel', e => {
    e.preventDefault();
    zoomAt(e.deltaY < 0 ? 1.1 : 0.9, e.clientX, e.clientY);
  }, { passive: false });
  container.addEventListener('mousedown', e => {
    dragging = true; startX = e.clientX - tx; startY = e.clientY - ty;
    container.classList.add('grabbing');
  });
  window.addEventListener('mousemove', e => {
    if (!dragging) return;
    tx = e.clientX - startX; ty = e.clientY - startY;
    applyTransform();
  });
  window.addEventListener('mouseup', () => {
    dragging = false; container.classList.remove('grabbing');
  });
</script>
</body>
</html>